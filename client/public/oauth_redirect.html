<!DOCTYPE html>
<html>
<head>
    <title>Authentication Redirect</title>
    <meta http-equiv="Cross-Origin-Opener-Policy" content="same-origin-allow-popups">
</head>
<body>
    <script>
        // This script runs on the frontend's origin (e.g., http://localhost:5173)
        // It receives the OAuth status from the backend via URL parameters
        // and then relays it to the main window.

        const params = new URLSearchParams(window.location.search);
        const type = params.get('type');
        const authorized = params.get('authorized') === 'true';
        const error = params.get('error');

        // Redirect back to the main application with the OAuth status
        const redirectUrl = `${window.location.origin}?type=${type}&authorized=${authorized}${error ? `&error=${encodeURIComponent(error)}` : ''}`;
        window.location.replace(redirectUrl);
    </script>
</body>
</html>